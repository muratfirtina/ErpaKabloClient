<div class="product-list position-relative" [class.list-view]="listView">
  <!-- Spinner ve Progress Bar Container -->
  <div *ngIf="loading" class="loading-container">
    <!-- SquareLoader spinner'ı -->
    <app-spinner [spinnerType]="'s2'" [showOverlay]="false"></app-spinner>
    
    <!-- Progress Bar -->
    <div class="loading-progress">
      <div class="progress-bar" [style.width.%]="loadingProgress"></div>
    </div>
    <div class="loading-text">{{loadingText || 'Loading products...'}}</div>
  </div>
  
  <!-- Ürünleri göster - yükleme durumunda opacity düşür veya gizle -->
  <div class="row" [class.opacity-25]="loading" [class.d-none]="loading">
    <div class="col-12 col-sm-6 col-lg-3 mb-4" *ngFor="let product of products">
      <app-product-card [product]="product" [listView]="listView"></app-product-card>
    </div>
  </div>
  
  <!-- Ürün yoksa ve yükleme bittiyse -->
  <div class="no-results-container" *ngIf="products.length === 0 && !loading">
    <div class="alert alert-warning text-center">
      <i class="fas fa-box-open fa-2x mb-2"></i>
      <p>The product was not found in this category.</p>
    </div>
  </div>
  
  <!-- Debug bilgisi -->
  <div class="debug-info small text-muted mt-3" *ngIf="products.length === 0 && !loading">
    <p>Number of products: {{products?.length || 0}} | Loading: {{loading ? 'Evet' : 'Hayır'}}</p>
  </div>
</div>