<div class="update-password-container">
    <div class="update-form">
        <!-- Set New Password başlığı -->
        <h2>{{ 'auth.setNewPassword' | translate }}</h2>
        
        <div *ngIf="state">
            <form [formGroup]="updatePasswordForm" (ngSubmit)="onSubmit()">
                <!-- New Password input -->
                <div class="form-floating mb-3">
                    <input 
                        type="password" 
                        class="form-control" 
                        formControlName="password"
                        id="password" 
                        [placeholder]="'auth.newPassword' | translate"
                        [ngClass]="{'is-invalid': (updatePasswordForm.get('password').invalid && updatePasswordForm.get('password').dirty)}">
                    <label for="password">{{ 'auth.newPassword' | translate }}</label>
                    <div class="invalid-feedback" *ngIf="updatePasswordForm.get('password').invalid && updatePasswordForm.get('password').dirty">
                        <ul class="mb-0">
                            <li *ngIf="!passwordRequirements.uppercase">{{ 'validation.passwordUppercase' | translate }}</li>
                            <li *ngIf="!passwordRequirements.lowercase">{{ 'validation.passwordLowercase' | translate }}</li>
                            <li *ngIf="!passwordRequirements.symbol">{{ 'validation.passwordSymbol' | translate }}</li>
                            <li *ngIf="!passwordRequirements.length">{{ 'validation.passwordLength' | translate }}</li>
                        </ul>
                    </div>
                </div>

                <!-- Confirm Password input -->
                <div class="form-floating mb-3">
                    <input 
                        type="password" 
                        class="form-control" 
                        formControlName="passwordConfirm"
                        id="passwordConfirm" 
                        [placeholder]="'auth.confirmPassword' | translate"
                        [ngClass]="{'is-invalid': (updatePasswordForm.get('passwordConfirm').invalid && updatePasswordForm.get('passwordConfirm').dirty)}">
                    <label for="passwordConfirm">{{ 'auth.confirmPassword' | translate }}</label>
                    <div class="invalid-feedback" *ngIf="updatePasswordForm.get('passwordConfirm').invalid && updatePasswordForm.get('passwordConfirm').dirty">
                        <span *ngIf="updatePasswordForm.get('passwordConfirm').errors?.['notSame']">{{ 'validation.passwordsNotMatch' | translate }}</span>
                    </div>
                </div>

                <!-- Update Password button -->
                <button type="submit" class="reset-button" [disabled]="updatePasswordForm.invalid">
                    {{ 'auth.updatePassword' | translate }}
                </button>
            </form>

            <!-- Back to Login link -->
            <a routerLink="/login" class="back-to-login">
                <i class="fas fa-arrow-left"></i>
                {{ 'auth.backToLogin' | translate }}
            </a>
        </div>
    </div>
</div>
<app-downbar></app-downbar>