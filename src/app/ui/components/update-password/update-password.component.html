<div class="update-password-container">
    <div class="update-form">
        <h2>Set New Password</h2>
        
        <div *ngIf="state">
            <form [formGroup]="updatePasswordForm" (ngSubmit)="onSubmit()">
                <div class="form-floating mb-3">
                    <input 
                        type="password" 
                        class="form-control" 
                        formControlName="password"
                        id="password" 
                        placeholder="New Password"
                        [ngClass]="{'is-invalid': (updatePasswordForm.get('password').invalid && updatePasswordForm.get('password').dirty)}">
                    <label for="password">New Password</label>
                    <div class="invalid-feedback" *ngIf="updatePasswordForm.get('password').invalid && updatePasswordForm.get('password').dirty">
                        <ul class="mb-0">
                            <li *ngIf="!passwordRequirements.uppercase">Password must contain at least one uppercase letter</li>
                            <li *ngIf="!passwordRequirements.lowercase">Password must contain at least one lowercase letter</li>
                            <li *ngIf="!passwordRequirements.symbol">Password must contain at least one special character</li>
                            <li *ngIf="!passwordRequirements.length">Password must be at least 8 characters long</li>
                        </ul>
                    </div>
                </div>

                <div class="form-floating mb-3">
                    <input 
                        type="password" 
                        class="form-control" 
                        formControlName="passwordConfirm"
                        id="passwordConfirm" 
                        placeholder="Confirm Password"
                        [ngClass]="{'is-invalid': (updatePasswordForm.get('passwordConfirm').invalid && updatePasswordForm.get('passwordConfirm').dirty)}">
                    <label for="passwordConfirm">Confirm Password</label>
                    <div class="invalid-feedback" *ngIf="updatePasswordForm.get('passwordConfirm').invalid && updatePasswordForm.get('passwordConfirm').dirty">
                        <span *ngIf="updatePasswordForm.get('passwordConfirm').errors?.['notSame']">Passwords do not match</span>
                    </div>
                </div>

                <button type="submit" class="reset-button" [disabled]="updatePasswordForm.invalid">
                    Update Password
                </button>
            </form>

            <a routerLink="/login" class="back-to-login">
                <i class="fas fa-arrow-left"></i>
                Back to Login
            </a>
        </div>
    </div>
</div>
<app-downbar></app-downbar>