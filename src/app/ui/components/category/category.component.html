<app-main-header></app-main-header>
<app-navbar></app-navbar>

<div class="container-xxl">
  <div class="breadcrumb">
    <app-breadcrumb></app-breadcrumb>
  </div>

  <!-- Category Header -->
  <div class="category-head mb-4">
    <div class="row g-0">
      <div class="col-md-7 category-info d-flex align-items-center">
        <div class="category-description p-4">
          <h1 class="category-name">{{ category?.name }}</h1>
          <p class="category-desc">{{ category?.title }}</p>
        </div>
      </div>
      <div class="col-md-5 category-image">
        <img [src]="category?.categoryImage?.url" [alt]="category?.name" class="img-fluid">
      </div>
    </div>
  </div>

  <!-- Subcategories Section -->
  <section class="categories" *ngIf="subCategories.length > 0">
    <div class="category-place" *ngIf="isMobile">All Categories For {{category?.name}}</div>
    <h2 class="category-header">All Categories For {{category?.name}}</h2>
    <div class="container">
      <button class="scroll-btn left" (click)="scrollLeft()" *ngIf="!isMobile && subCategories.length > 6">
        <!-- Sol ok ikonu -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
      </button>
  
      <div class="category-grid" #categoryGrid>
        <div class="category-card" *ngFor="let category of subCategories" [routerLink]="['/category', category.id]">
          <div class="category-image">
            <img [src]="category.categoryImage?.url" [alt]="category?.name">
          </div>
          <div class="category-content">
            <h3 class="category-title">{{ category?.name }}</h3>
            <!-- <p class="category-description" *ngIf="!isMobile" >{{ category.title || 'Ürünlerimizi keşfedin' }}</p> -->
            <a class="btn-category" [routerLink]="['/category', category.id]" *ngIf="isMobile">İncele</a>
          </div>
        </div>
      </div>
  
      <button class="scroll-btn right" (click)="scrollRight()" *ngIf="!isMobile && subCategories.length > 6">
        <!-- Sağ ok ikonu -->
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
      </button>
    </div>
  </section>

  <!-- Main Content Area -->
  <div class="row">
    <!-- Sorting and Total Items -->
    <div class="col-12 mb-3">
      <div class="d-flex justify-content-between align-items-center flex-wrap">
        <p class="total-items mb-0">{{ totalItems }} product found</p>
        <div class="sort-dropdown">
          <label for="sort-select" class="me-2">Sorted by:</label>
          <select id="sort-select" class="form-select" (change)="onSortChange($event)">
            <option value="">Default</option>
            <option value="price_asc">Price (Low - High)</option>
            <option value="price_desc">Price (High - Low)</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Filter Sidebar -->
    <div class="col-md-3 mb-4 mb-md-0">
      <app-filter [availableFilters]="availableFilters" 
                 [selectedFilters]="selectedFilters"
                 (filterChange)="onFilterChange($event)">
      </app-filter>
    </div>

    <!-- Product List -->
    <div class="col-md-9">
      <app-ui-product-list 
        *ngIf="!noResults" 
        [products]="products">
      </app-ui-product-list>
      
      <mat-paginator 
        [length]="totalItems" 
        [pageSize]="pageRequest.pageSize" 
        [pageSizeOptions]="[5, 10, 25, 100]"
        (page)="onPageChange($event)" 
        *ngIf="totalItems > 0"
        class="mt-3">
      </mat-paginator>
    </div>
  </div>
</div>